<!--一次用户数量-->
<% include nav.ejs %>

<script type="text/javascript" src="/js/ichartjs/ichart.1.2.min.js"></script>
<link rel="stylesheet" href="/css/ichartjs/demo.css" type="text/css"/>
<% include select_date.ejs %>
<div class="row">
    <div class="col-lg-12">
        <div class="col-lg-1">
            <button name="day" id="day">日一次</button>
        </div>
        <div class="col-lg-1">
            <button name="week" id="week">周一次</button>
        </div>
        <div class="col-lg-1">
            <button name="month" id="month">月一次</button>
        </div>
        <% include save_print.ejs %>
    </div>
</div>
<script type="text/javascript">
    //柱状图表 两段数据 上下
    $(function(){
        var new_user = [54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776,83361,54841,72400,76776],
            real_new = [22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148,68333,22790,33284,52148];
        var data = [
            {
                name : '新增用户',
                value:new_user,
                color:'#32bdbc'
            },
            {
                name : '实际新增',
                value:real_new,
                color:'#d75a5e'
            }
        ];
        var labels = [];
        for(var i=0;i<31;i++){
            labels[i] = i + 1;
        }

        var chart = new iChart.ColumnStacked2D({
            render : 'columntacked2d',
            data: data,
            labels:labels,
            title : {
                text:'日一次用户数及比例',
                color:'#dcd6cb',
                textAlign:'left',
                padding:'0 40',
                font:'微软雅黑',
                border:{
                    enable:true,
                    width:[0,0,4,0],
                    color:'#698389'
                },
                height:40
            },
            footnote : {
                text:'数据来源：日一次用户数及比例',
                font:'微软雅黑',
                padding:'0 8',
                color:'#dcd6cb'
            },
            padding:'8 0',
            width : 1200,
            height : 400,
            column_width:120,
            gradient : true,//应用背景渐变
            gradient_mode:'LinearGradientDownUp',//渐变类型
            color_factor : 0.1,//渐变因子
            background_color : '#425154',
            sub_option:{
                label:{color:'#f9f9f9',fontsize:12,fontweight:600},
                border : false
            },
            label:{color:'#dcd6cb',font:'微软雅黑',fontsize:12,fontweight:600},
            legend:{
                enable:true,
                background_color : null,
                line_height:25,
                color:'#dcd6cb',
                fontsize:12,
                font:'微软雅黑',
                fontweight:600,
                border : {
                    enable : false
                }
            },
            column_width:120,
            coordinate:{
                background_color : 0,
                grid_color:'#888888',
                axis : {
                    color : '#c0d0e0',
                    width : 0
                },
                scale:[{
                    position:'left',
                    scale_enable : false,
                    start_scale:0,
                    scale_space:20000,
                    end_scale:160000,
                    label:{color:'#dcd6cb',fontsize:11,fontweight:600}
                }],
                width:'80%',
                height:'76%'
            }
        });

        //利用自定义组件构造左上侧单位
        chart.plugin(new iChart.Custom({
            drawFn:function(){
                //计算位置
                var coo = chart.getCoordinate(),
                        x = coo.get('originx'),
                        y = coo.get('originy');
                //在左上侧的位置，渲染一个单位的文字
                chart.target.textAlign('end')
                        .textBaseline('bottom')
                        .textFont('600 12px 微软雅黑')
                        .fillText('单位(个)',x,y-14,false,'#be5863')

            }
        }));

        chart.draw();
    });
</script>
<div class="col-lg-12">
    <div id='columntacked2d'></div>
    <table class="table table-bordered">
        <thead>
        <tr>
            <th></th>
            <% for(var i=1;i<32;i++){ %>
            <th><%=i%></th>
            <% } %>
        </tr>

        </thead>
        <tbody>
        <tr>
            <td>日一次用户比例</td>
            <% active.forEach(function( a ){%>
                <td><%= a %></td>
            <%});%>
        </tr>
        <tr>
            <td>日一次用户数</td>
            <% active.forEach(function( a ){%>
            <td><%= a %></td>
            <%});%>
        </tr>
        <tr>
            <td>日新增用户数</td>
            <% active.forEach(function( a ){%>
            <td><%= a %></td>
            <%});%>
        </tr>
        </tbody>
    </table>
</div>
<% include footer.ejs %>